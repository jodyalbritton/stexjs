{"version":3,"sources":["../../../src/apps/index.js"],"names":["list","show","request","require","rp","client","url","appsAccum","options","method","headers","json","then","concat","response","items","_links","next","href","catch","err","console","log","appId"],"mappings":";;;;;;;;;;QAiBgBA,I,GAAAA,I;QAkCAC,I,GAAAA,I;;;;AAnDhB,IAAMC,UAAUC,QAAQ,SAAR,CAAhB;AACA,IAAMC,KAAKD,QAAQ,iBAAR,CAAX;;AAgBO,SAASH,IAAT,CAAcK,MAAd,EAAsBC,GAAtB,EAA2BC,SAA3B,EAAsC;AAAA;;AACzC,QAAIC,UAAU;AACVC,gBAAQ,KADE;AAEVH,aAAKD,OAAOC,GAAP,GAAa,MAFR;AAGVI,iBAASL,OAAOK,OAHN;AAIVC,cAAM;AAJI,KAAd;;AAQA,WAAOP,GAAGI,OAAH,EACNI,IADM,CACD,oBAAY;AAAA;;AACd,YAAI,CAACL,SAAL,EAAgB;AACZA,wBAAY,EAAZ;AACH;AACDA,oBAAYA,UAAUM,MAAV,CAAiBC,SAASC,KAA1B,CAAZ;AACA,YAAID,SAASE,MAAT,CAAgBC,IAApB,EAA0B;AACtB,mBAAOjB,KAAKQ,OAAL,EAAcM,SAASE,MAAT,CAAgBC,IAAhB,CAAqBC,IAAnC,EAAyCX,SAAzC,CAAP;AACH;AACD,eAAOA,SAAP;AACC,KAVE,aAWFY,KAXE,CAWI,UAASC,GAAT,EAAc;AACrBC,gBAAQC,GAAR,iCAAmCF,GAAnC;AACH,KAbM,CAAP;AAcH;;AAWM,SAASnB,IAAT,CAAcI,MAAd,EAAsBkB,KAAtB,EAA6B;AAChC,QAAIf,UAAU;AACVC,gBAAQ,KADE;AAEVH,aAAKD,OAAOC,GAAP,GAAa,OAAb,GAAqBiB,KAFhB;AAGVb,iBAASL,OAAOK,OAHN;AAIVC,cAAM;AAJI,KAAd;;AAOA,WAAOP,GAAGI,OAAH,CAAP;AACH","file":"index.js","sourcesContent":["const request = require('request')\r\nconst rp = require('request-promise')\r\n\r\n\r\n\r\n/**\r\n * Gets a list of apps.\r\n *\r\n * @param {Object} client - Client object previously instantiated\r\n * @param {string} capability - The capability to filter by; if not specified,\r\n *  all apps will be returned.\r\n * @param {string} url - The URL to make the request to. Used to handle paging;\r\n *  calling clients should not need to specify this.\r\n * @param {Array} appsAccum - An accumulator for recursive API calls to\r\n *  handle paged result sets. Calling clients should not need to specify this.\r\n * @returns {Object} - The request-promise for this API request.\r\n */\r\nexport function list(client, url, appsAccum) {\r\n    let options = {\r\n        method: 'GET',\r\n        url: client.url + \"apps\",\r\n        headers: client.headers,\r\n        json: true\r\n    }\r\n    \r\n\r\n    return rp(options)\r\n    .then(response => {\r\n        if (!appsAccum) {\r\n            appsAccum = []\r\n        }\r\n        appsAccum = appsAccum.concat(response.items)\r\n        if (response._links.next) {\r\n            return list(options, response._links.next.href, appsAccum)\r\n        }\r\n        return appsAccum\r\n        })\r\n        .catch(function(err) {\r\n        console.log(`Error getting apps: ${err}`)\r\n    })\r\n}\r\n\r\n\r\n\r\n/**\r\n * Gets one apps.\r\n *\r\n * @param {Object{}} client - Client object previously instantiated\r\n * @param {string} appId - The selected App ID\r\n * @returns {Object} - The request-promise for this API request.\r\n */\r\nexport function show(client, appId) {\r\n    let options = {\r\n        method: 'GET',\r\n        url: client.url + \"apps/\"+appId,\r\n        headers: client.headers,\r\n        json: true\r\n    }\r\n\r\n    return rp(options)\r\n}\r\n"]}