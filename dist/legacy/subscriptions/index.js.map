{"version":3,"sources":["../../../src/subscriptions/index.js"],"names":["createDeviceSubscription","deleteAppSubscriptions","request","require","rp","client","appId","deviceId","componentId","capability","attribute","stateChangeOnly","value","body","sourceType","device","options","method","url","headers","json"],"mappings":";;;;;QAIgBA,wB,GAAAA,wB;QAqCCC,sB,GAAAA,sB;AAzCjB,IAAMC,UAAUC,QAAQ,SAAR,CAAhB;AACA,IAAMC,KAAKD,QAAQ,iBAAR,CAAX;;AAGO,SAASH,wBAAT,CACHK,MADG,EAEHC,KAFG,EAGHC,QAHG,EAIHC,WAJG,EAKHC,UALG,EAMHC,SANG,EAOHC,eAPG,EAQHC,KARG,EAQG;AACN,QAAIC,OAAO;;AAEPC,oBAAa,QAFN;AAGPC,gBAAS;AACLR,sBAAWA,QADN;AAELC,yBAAcA,WAFT;AAGLC,wBAAYA,UAHP;AAILC,uBAAWA,SAJN;AAKLE,mBAAOA,KALF;AAMLD,6BAAiBA;AANZ;;AAHF,KAAX;;AAcA,QAAIK,UAAU;AACVC,gBAAQ,MADE;AAEVC,aAAKb,OAAOa,GAAP,GAAa,gBAAb,GAA8BZ,KAA9B,GAAoC,gBAF/B;AAGVa,iBAASd,OAAOc,OAHN;AAIVN,cAAMA,IAJI;AAKVO,cAAM;AALI,KAAd;;AAUA,WAAOhB,GAAGY,OAAH,CAAP;AACF;;AAGM,SAASf,sBAAT,CAAgCI,MAAhC,EAAwCC,KAAxC,EAA8C;;AAElD,QAAIU,UAAU;AACVC,gBAAQ,QADE;AAEVC,aAAKb,OAAOa,GAAP,GAAa,gBAAb,GAA8BZ,KAA9B,GAAoC,gBAF/B;AAGVa,iBAASd,OAAOc,OAHN;AAIVC,cAAM;AAJI,KAAd;;AAOA,WAAOhB,GAAGY,OAAH,CAAP;AACF","file":"index.js","sourcesContent":["const request = require('request')\r\nconst rp = require('request-promise')\r\n\r\n\r\nexport function createDeviceSubscription(\r\n    client, \r\n    appId, \r\n    deviceId, \r\n    componentId, \r\n    capability, \r\n    attribute, \r\n    stateChangeOnly,\r\n    value){\r\n    let body = {\r\n        \r\n        sourceType : 'DEVICE',\r\n        device : {\r\n            deviceId : deviceId,\r\n            componentId : componentId,\r\n            capability: capability,\r\n            attribute: attribute,\r\n            value: value,\r\n            stateChangeOnly: stateChangeOnly,\r\n        }\r\n\r\n    }\r\n    \r\n    let options = {\r\n        method: 'POST',\r\n        url: client.url + \"installedapps/\"+appId+\"/subscriptions\",\r\n        headers: client.headers,\r\n        body: body,\r\n        json: true\r\n    }\r\n\r\n\r\n\r\n    return rp(options)\r\n }\r\n\r\n\r\n export function deleteAppSubscriptions(client, appId){\r\n\r\n    let options = {\r\n        method: 'DELETE',\r\n        url: client.url + \"installedapps/\"+appId+\"/subscriptions\",\r\n        headers: client.headers,\r\n        json: true\r\n    }\r\n\r\n    return rp(options)\r\n }"]}